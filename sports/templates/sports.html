<html>
	<head>
		<meta charset='utf-8'>
		<meta name='viewport' content='width=device-width, initial-scale=1.0'>
		<title>Sports</title>
		<!-- JQuery -->
		<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>

		<!-- Google Authentication -->
		<script src="//apis.google.com/js/platform.js?onload=start"></script>

		<!-- Foundation -->
		<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/foundation/6.1.2/foundation.min.css"></link>
		
		<!-- Site -->
		<link rel=stylesheet type=text/css href="/static/styles.css">
		<!--<script src="/static/app.js"></script>-->

	</head>
	<body>
		<div class='top-bar'>
			<div class='top-bar-left'>
				<ul class='menu'>
					<li class='menu-text'>SA Sports</li>					
					{% for i in sports %} 
					<li>
					{% if i.id == sport_id|int %}
						<a class='selected' href = "{{ url_for('sports', sport_id = i.id ) }}">{{ i.name }}</a>
					{% else %}
						<a href = "{{ url_for('sports', sport_id = i.id ) }}">{{ i.name }}</a>
					{% endif %}
					</li>
				{% endfor %}
				</ul>
			</div>
			<div class='top-bar-right'>
				<span class="g-signin"
				    data-scope="openid email"
				    data-clientid="13140951618-15nik769cellkubaqnjk5facdib2dh4d.apps.googleusercontent.com"
				    data-redirecturi="postmessage"
				    data-accesstype="offline"
				    data-cookiepolicy="single_host_origin"
				    data-callback="signInCallback"
				    data-approvalprompt="force">
				  </span>
			</div>
		</div>
		<br>
		<div class='row'>
			<div class='column small-up-1 medium-up-2 large-up-3'>
			{% for i in players %} 		
				<div class='column'>
					<div class='callout'>
					
						{% if i.photo %}
							<div class='photo' style='background-image:url(/static/img/{{ i.photo }}'></div>
						{% else %}
							<div class='photo'></div>
						{% endif %}
						
						<div class='player'>
							<a href='#'>{{ i.name }}</a>
							
						</div>
					</div>
				</div>
			{% endfor %}	
			</div>			
		</div>
	</body>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/foundation/6.1.2/foundation.min.js"></script>
	<script>

	$(document).foundation();
	function signInCallback(authResult) {
  		if (authResult['code']) {
    		$.ajax({
      			type: 'POST',
      			url: '/gconnect?state={{STATE}}',
      			processData: false,
      			data: authResult['code'],
      			contentType: 'application/octet-stream; charset=utf-8',
      			success: function(result) {
        			if (result) {
          				window.location.href = "/sports";
          			} 
					else {
          				alert('An error has occured')
					}
				}
			});
        }
	}

</script>

</html>
